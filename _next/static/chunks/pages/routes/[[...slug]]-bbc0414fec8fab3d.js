(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[840],{52782:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/routes/[[...slug]]",function(){return t(80)}])},39326:function(e,n,t){"use strict";t.d(n,{$:function(){return o}});var r=t(21900),i=t(56829),o=function(){return(0,i.useContext)(r.Z).t}},80:function(e,n,t){"use strict";t.r(n),t.d(n,{__N_SSP:function(){return q},default:function(){return J}});var r,i,o=t(69713),a=t(10961),s=t(29567),c=t(98381),u=t(59591),l=t(79205),d=t(4949),p=t(96003),f=t(72850),h=t(56829),m=function(){var e=[];return{subscribe:function(n){var t=e.push(n);return function(){e.splice(t-1,1)}},dispatch:function(n){requestAnimationFrame(function(){e.forEach(function(e){return e(n)})})}}},g=function(e){var n,t,r=null!=e?e:{},i=r.initialMode,o=void 0!==i&&i,a=r.animated,s=void 0!==a&&a,c=(0,p._)((0,h.useState)(o),2),u=c[0],l=c[1],g=(0,p._)((0,h.useState)(o),2),v=g[0],w=g[1],Z=(0,h.useMemo)(function(){return m()},[]),y=(0,h.useRef)([]),b=(0,h.useRef)(function(){return Promise.resolve(!0)}),k=(0,h.useRef)(null),x=(0,h.useCallback)(function(){return l(!u)},[u]),_=(0,h.useCallback)((n=(0,d._)(function(e){return(0,f.Jh)(this,function(n){return k.current=e,w(!0),l(!0),[2,new Promise(function(e){Z.subscribe(function(n){e(n)})})]})}),function(e){return n.apply(this,arguments)}),[Z]),C=(0,h.useCallback)((0,d._)(function(){return(0,f.Jh)(this,function(e){switch(e.label){case 0:return[4,b.current()];case 1:return e.sent()&&(l(!1),w(s),Z.dispatch(void 0)),[2]}})}),[Z,s]),B=(0,h.useCallback)((t=(0,d._)(function(e){return(0,f.Jh)(this,function(n){switch(n.label){case 0:return[4,b.current()];case 1:return n.sent()&&(l(!1),w(s),Z.dispatch(e)),[2]}})}),function(e){return t.apply(this,arguments)}),[Z,s]),W=(0,h.useCallback)(function(){w(!1)},[]),R=(0,h.useCallback)(function(e){var n=y.current.push(e);return function(){y.current.splice(n-1,1)}},[]);return(0,h.useEffect)(function(){y.current.forEach(function(e){return e({isOpen:u})})},[u]),(0,h.useMemo)(function(){return{isOpen:u,open:_,cancel:C,close:B,toggle:x,subscribe:R,remove:W,get canClose(){return b.current},set canClose(callback){b.current=callback},render:function(e){var n,t;return v&&null!==(t=null!=e?e:null===(n=k.current)||void 0===n?void 0:n.call(k,this))&&void 0!==t?t:null}}},[C,B,v,_,R,x,u,W])},v=t(39326),w=t(87157),Z=t(33143),y=t(19490),b=t.n(y),k=t(85599),x=t.n(k),_=t(76440),C=t(93695),B=function(e){var n=(0,_.useRouter)(),t=n.push,r=n.asPath,i=C.Z.parseUrl(r),o=i.url,s=i.query,c=(0,p._)((0,h.useState)((0,w._)({},e.initialQuery,s)),2),u=c[0],l=c[1],d=(0,h.useCallback)(function(e,n){l(function(t){return(0,Z._)((0,w._)({},t),(0,a._)({},e,n))})},[]),f=C.Z.stringifyUrl({url:o,query:x()(u,function(n,t){var r;return null===(r=e.excludeFromUrl)||void 0===r?void 0:r.includes(t)})}),m=(0,h.useCallback)(function(e){l(b()({},u,e))},[u]);return(0,h.useEffect)(function(){f!==r&&t(f)},[f,t,r]),{query:u,setQuery:l,setField:d,mergeQuery:m}},W=t(9109),R=t(89298),X=t(75431),E=function(e){var n=new URLSearchParams;return Object.keys(e).forEach(function(t){var r=e[t];void 0!==r&&(Array.isArray(r)?r.forEach(function(e){return n.append(t,e)}):n.append(t,r))}),n},D=t(2974).ZP.extend({prefixUrl:"https://production-api.dersu.com"}).extend({prefixUrl:"".concat("https://production-api.dersu.com","/public/route")}),F=(r=(0,d._)(function(e){return(0,f.Jh)(this,function(n){return[2,D.get("total",{searchParams:E(e)}).json()]})}),function(e){return r.apply(this,arguments)}),Q=(i=(0,d._)(function(e){return(0,f.Jh)(this,function(n){return[2,D.get("",{searchParams:E(e)}).json()]})}),function(e){return i.apply(this,arguments)});(0,X.gc)(F,[R.Q.route,R.Q.total]);var H=(0,X.gc)(Q,[R.Q.route]),N=t(52806),P=t(43166),S=t(24940),A=t.n(S),L=t(28981),j=(0,X.Zl)([R.Q.route,R.Q.place,R.Q.group]);(0,X.Zl)([R.Q.route,R.Q.place,R.Q.activityType,R.Q.group]);var M=(0,N.k)(function(e){return{title:{marginBottom:e.spacing(7)},container:{display:"grid",gap:e.spacing(8),gridAutoFlow:"row",gridTemplateColumns:"repeat(auto-fill, minmax(".concat(e.toRem(300),", 1fr))")},places:{display:"grid",gridAutoFlow:"row",gap:e.spacing(2)}}}),I=function(){var e,n=j({select:function(e){return e.data.groups}});return(0,o.BX)("div",{children:[(0,o.tZ)(L.Z,{text:"H5",weight:500,css:M.title,children:"Rutas por Provincia"}),(0,o.tZ)("div",{css:M.container,children:null===(e=n.data)||void 0===e?void 0:e.map(function(e){return(0,o.BX)("div",{style:{flexGrow:1},children:[(0,o.tZ)(L.Z,{text:"B3",children:e.place.name}),(0,o.tZ)("div",{css:M.places,children:e.places.map(function(e){return(0,o.tZ)(L.Z.Link,{href:"".concat("/routes/".concat(e.slug)),text:"B3",color:"secondary.blueLink",children:e.name},e.id)})})]},e.place.id)})})]})},O=t(66105),T=(0,N.k)(function(e){return{container:{minHeight:"100vh",backgroundColor:e.colors.grey.white},wrapper:(0,a._)({padding:e.spacing(0,9.5),width:"100%",marginBottom:e.spacing(18)},e.breakpoints.down("sm"),{padding:e.spacing(0,4)}),contentTop:{display:"flex",justifyContent:"space-between",alignItems:"end",marginBottom:e.spacing(3.5)},routes:(0,a._)({display:"grid",gridAutoFlow:"row",gap:e.spacing(4),gridTemplateColumns:"100%"},e.breakpoints.down("sm"),{justifyContent:"center"}),index:(0,a._)({padding:e.spacing(20,9.5,0),display:"grid",gridAutoFlow:"row",gap:e.spacing(16)},e.breakpoints.down("sm"),{padding:e.spacing(15,4,0)}),footer:{backgroundColor:e.colors.grey.offWhite}}}),U=function(){var e,n,t=(0,v.$)(),r=(0,_.useRouter)(),i=B({initialQuery:{placeSlug:null===(e=r.query.slug)||void 0===e?void 0:e.join("/"),limit:2e3},excludeFromUrl:["limit","cursor","offset","placeSlug"]}),a=g({animated:!0}),d=H(i.query,{select:function(e){return e.data},placeholderData:P.Wk});return"es"!==r.locale?(0,o.tZ)(W.Z,{title:t.headerMenu.routes,children:(0,o.tZ)(u.Z,{children:(0,o.BX)(l.Z,{children:[t.routeFallback.workingOn," ",(0,o.tZ)(A(),{href:"/routes",locale:"es",scroll:!1,children:t.routeFallback.spanishVersion})," ",t.routeFallback.available]})})}):(0,o.BX)("div",{css:T.container,children:[a.render(),(0,o.tZ)(c.Z,{headerContentClassName:"md:bg-white"}),(0,o.tZ)("div",{css:T.wrapper,children:(0,o.tZ)("div",{css:T.routes,children:null===(n=d.data)||void 0===n?void 0:n.routes.map(function(e){return(0,o.tZ)(O.h,{route:e},e.id)})})}),(0,o.tZ)("div",{css:T.index,children:(0,o.tZ)(I,{})}),(0,o.tZ)("div",{css:T.footer,children:(0,o.tZ)(s.Z,{hasDivider:!1})})]})},q=!0,J=function(){return(0,o.tZ)(U,{})}},66105:function(e,n,t){"use strict";t.d(n,{h:function(){return W}});var r=t(10961),i=t(69713),o=t(87157),a=t(33143),s=t(96003),c=t(51891),u=t(75073),l=t.n(u),d=t(56829),p=function(e,n){return"number"==typeof n?n:e.breakpoints.values[n]},f=function(){return{width:window.innerWidth,height:window.innerHeight}},h=function(){var e=(0,c.u)(),n=(0,s._)((0,d.useState)({width:0,height:0}),2),t=n[0],r=n[1];(0,d.useEffect)(function(){r(f());var e=function(){r(f())};return window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}},[]);var i=(0,d.useCallback)(function(n){return t.width>=p(e,n)},[t.width,e]),u=(0,d.useCallback)(function(n){return t.width<=p(e,n)},[t.width,e]),h=(0,d.useCallback)(function(n,r){return l()(t.width,p(e,n),p(e,r))},[t.width,e]);return(0,a._)((0,o._)({},t),{up:i,down:u,btw:h})},m=function(e){var n=h(),t=!0;return(e.min&&e.max?t=n.btw(e.min,e.max):e.min?t=n.up(e.min):e.max&&(t=n.down(e.max)),t)?(0,i.tZ)(i.HY,{children:e.children}):null},g=t(16389),v=t(28981),w=t(6017),Z=t(27437),y=t(50479),b=t(52806),k=t(83568),x=t(24940),_=t.n(x),C=t(76440),B=(0,b.k)(function(e){var n;return{container:(0,r._)({border:e.h.border(1,e.colors.grey.xs),borderRadius:10,display:"flex",cursor:"pointer",width:"100%",minHeight:e.toRem(213),":hover":(0,r._)({backgroundColor:e.colors.grey.xxs},y.y.routeCard.get("level"),{backgroundColor:e.colors.grey.white})},e.breakpoints.down("sm"),{flexDirection:"column"}),image:(n={borderRadius:10,objectFit:"cover",margin:e.spacing(2)},(0,r._)(n,e.breakpoints.up("sm"),{maxWidth:e.toRem(244)}),(0,r._)(n,e.breakpoints.down("sm"),{height:e.toRem(200)}),n),details:(0,r._)({flexGrow:1,padding:e.spacing(6,6,5),display:"flex",flexDirection:"column",justifyContent:"space-between",alignItems:"start",width:"50%"},e.breakpoints.down("sm"),{width:"100%",padding:e.spacing(2)}),nameWrapper:(0,r._)({maxWidth:e.toRem(350),width:"100%",margin:e.spacing(0,2,2,0)},e.breakpoints.down("sm"),{marginBottom:e.spacing(3)}),name:(0,r._)({marginBottom:e.spacing(1),width:"100%",overflow:"hidden",overflowWrap:"break-word",textOverflow:"ellipsis","&":{lineHeight:1.2}},e.breakpoints.down("sm"),{marginBottom:e.spacing(3)}),addressWrapper:{display:"grid",gridAutoFlow:"column",gap:e.spacing(2.5),width:"max-content",maxWidth:"100%",alignItems:"center"},addressWrapperDivider:{width:2,backgroundColor:e.colors.grey.xs,height:"100%"},routeData:{display:"grid",gridAutoFlow:"column",gap:e.spacing(7.5)},routeDataName:{marginBottom:e.spacing(1)},levelsContainer:{display:"grid",gap:e.spacing(2),marginBottom:"auto",gridTemplateColumns:"repeat(auto-fit, ".concat(e.toRem(54),")"),maxWidth:"100%"},nameLevels:(0,r._)({display:"flex",justifyContent:"space-between",width:"100%",flexWrap:"wrap",marginBottom:e.spacing(4)},e.breakpoints.down("sm"),{flexDirection:"column"})}}),W=function(e){var n,t,r=(0,C.useRouter)().locale,o=(0,c.u)(),a=(0,w.i)(),s=(0,Z.AC)({select:function(e){return(0,k.Hr)(e.data.skills.flatMap(function(e){var n;return null!==(n=e.skills)&&void 0!==n?n:[]}).flatMap(function(e){var n;return null!==(n=e.levels)&&void 0!==n?n:[]}),function(e){return e.id})}}),u=null!==(n=e.route.levels)&&void 0!==n?n:e.route.levelIds.map(function(e){var n;return null===(n=s.data)||void 0===n?void 0:n[e]}),l="".concat((e.route.distanceInMeters/1e3).toLocaleString(r)," km"),d="".concat(e.route.elevationGainInMeters.toLocaleString(r)," m");return(0,i.tZ)(_(),{href:a("route",{slug:null!==(t=e.route.slug)&&void 0!==t?t:e.route.id}),passHref:!0,scroll:!1,children:(0,i.BX)("div",{css:B.container,children:[(0,i.tZ)("img",{css:B.image,src:e.route.thumbnail,alt:e.route.name}),(0,i.BX)("div",{css:B.details,children:[(0,i.BX)("div",{css:B.nameLevels,children:[(0,i.BX)("div",{css:B.nameWrapper,children:[(0,i.tZ)(v.Z,{text:"H5",weight:500,css:B.name,title:e.route.name,children:e.route.name}),(0,i.tZ)(m,{min:"sm",children:(0,i.BX)("div",{css:B.addressWrapper,children:[(0,i.tZ)(v.Z,{text:"B2",color:"grey.l",family:"sans",children:e.route.address}),(0,i.tZ)("span",{css:B.addressWrapperDivider}),(0,i.tZ)(v.Z,{text:"B2",color:"secondary.blueLink",family:"sans",nowrap:!0,children:"Como Ilegar"})]})}),(0,i.tZ)(m,{max:"sm",children:(0,i.BX)("div",{css:B.addressWrapper,children:[(0,i.tZ)(v.Z,{text:"B2",color:"grey.offBlack",family:"sans",children:e.route.address}),(0,i.tZ)("span",{css:B.addressWrapperDivider}),(0,i.tZ)(v.Z,{text:"B2",color:"grey.offBlack",family:"sans",nowrap:!0,children:l}),(0,i.tZ)("span",{css:B.addressWrapperDivider}),(0,i.BX)(v.Z,{text:"B2",color:"grey.offBlack",family:"sans",nowrap:!0,children:["+ ",d]})]})})]}),(0,i.tZ)("div",{style:{width:o.toRem(62*u.length-7)},css:B.levelsContainer,children:u.map(function(e){return(0,i.tZ)(g.E,{level:e,className:y.y.routeCard.set("level")},e.id)})})]}),(0,i.tZ)(m,{min:"sm",children:(0,i.BX)("div",{css:B.routeData,children:[(0,i.BX)("div",{children:[(0,i.tZ)(v.Z,{text:"B1",color:"grey.l",transform:"uppercase",family:"sans",css:B.routeDataName,children:"distancia"}),(0,i.tZ)(v.Z,{text:"H5",weight:500,children:l})]}),(0,i.BX)("div",{children:[(0,i.tZ)(v.Z,{text:"B1",color:"grey.l",transform:"uppercase",family:"sans",css:B.routeDataName,children:"desnivel positivo"}),(0,i.tZ)(v.Z,{text:"H5",weight:500,children:d})]})]})})]})]})})}}},function(e){e.O(0,[974,593,171,236,381,519,774,888,179],function(){return e(e.s=52782)}),_N_E=e.O()}]);